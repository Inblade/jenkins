pipeline {
    agent {
        label 'work1'
        }
    triggers { pollSCM('* * * * *') }
    stages {
        stage('Cloning index.html') {
            steps {
                sh 'if ! git diff --name-only $TRAVIS_COMMIT_RANGE | grep -qvE '(*.md$)' 
                    then
                    echo "Only docs were updated, not running the CI."
                    exit
                    fi'
                sh 'git config --global user.email "dkocheto@gmail.com"'
                sh 'git config --global user.name   "inblade"'
                sh 'chmod 755 index.html'
                sh 'cp index.html /usr/local/share/applications/'
                sh 'ln -fs /usr/local/share/applications/index.html /usr/share/nginx/html'
            }
        }
      }
    }
